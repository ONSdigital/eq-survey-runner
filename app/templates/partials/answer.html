{% import 'macros/helpers.html' as helpers %}

<div class="response response--{{answer.type|lower}}" id="{{answer.id}}">
  {% set invalid = answer.is_valid == False %}

  {%- set answer_guidance %}
    {% if answer.schema_item.guidance %}
      {% include 'partials/guidance.html' %}
    {% endif %}
  {% endset -%}

  {%- set answer_fields %}
    {% if answer.schema_item.display and answer.schema_item.display.properties %}
      {% set use_grid = answer.schema_item.display.properties.columns  %}
    {% endif %}
    {% include 'partials/answers/' ~ answer.schema_item.type|lower ~ '.html' %}
  {% endset -%}

  {% if invalid %}
    {% with %}
      {% set alert_title %}
        {% if answer.errors %}
        <ul class="list list--bare">
          {% for error in answer.errors %}
          <li class="list__item venus" {{helpers.errorTracking(question.id, error)}}>{{ error }}</li>
          {% endfor %}
        </ul>
        {% endif %}
      {% endset %}
      {% set alert_body = answer_fields %}
      {% include 'partials/alert.html' %}
      {{answer_guidance|safe}}
    {% endwith %}
  {% else %}
    {{answer_fields|safe}}
    {{answer_guidance|safe}}
  {% endif %}
</div>
