{% import 'macros/helpers.html' as helpers %}

{% set guidance = {
  "data-show-label": _(answer_guidance.schema_item.show_guidance),
  "data-hide-label": _(answer_guidance.schema_item.hide_guidance)
} %}

{% set guidance_link = {
  "href": "#guidance-" ~ answer_guidance.id,
  "id": "guidance-" ~ answer_guidance.id ~ "-trigger",
  "aria-controls": "guidance-" ~ answer_guidance.id ~ "-body",
  "aria-expanded": 'false',
  "data-guidance-trigger": 'true'
} %}

{% set guidance_body = {
  "id": "guidance-" ~ answer_guidance.id ~ "-body",
  "aria-hidden": "true"
} %}

<div class="guidance js-details" {{guidance|xmlattr}}>
  <a class="guidance__link js-details-trigger js-details-label mars"
    {{guidance_link|xmlattr}} {{helpers.track('click', 'Help', 'Guidance click', answer_guidance.id)}}>{{_(answer_guidance.schema_item.show_guidance)}}</a>
  <div class="guidance__main js-details-body" {{guidance_body|xmlattr}}>
    <div class="guidance__content mars">
      {% for guide in answer_guidance.schema_item.content %}
          {%- if guide.title -%}
            <h3 class="venus">{{guide.title}}</h3>
          {% endif %}
          {%- if guide.description -%}
            <h2 class="mars">{{guide.description|safe}}</h2>
          {% endif %}
          {%- if guide.list -%}
            <ul class="mars">
              {%- for item in guide.list -%}
                <li>{{item|safe}}</li>
              {% endfor %}
            </ul>
          {% endif %}
      {% endfor %}
    </div>
  </div>
</div>
