{%- macro label(response) %}
  {% set attr = {
    "class": "label" ~ (' u-visuallyhidden' if response.hidelabel),
    "for": response.id,
    "id": "label-" ~ response.id
  } %}
  <label {{attr|xmlattr}}>{{response.label}}</label>
{% endmacro -%}

{%- macro input(type, question, response) %}

  {% set special_types = {
    'currency': 'Â£',
    'percentage': '%'
  } %}

  {% if type in special_types %}
    {% set input_type = 'text' %}
    {% set input_has_special_type = true %}
  {% else %}
    {% set input_type = type %}
    {% set input_has_special_type = false %}
  {% endif %}

  {% set attr = {
    "class": "input input--" ~ input_type,
    "type": input_type,
    "value": response.value|e,
    "name": response.id,
    "id": response.id,
    "placeholder": response.placeholder,
    "aria-describedby": "description-" ~ question.id ~ " guidance-" ~ response.id ~ "-link"
  } %}

  {% if input_has_special_type %}
    <div class="input-type input-type--{{type}}" data-type="{{special_types[type]}}">
      <input {{attr|xmlattr}}>
    </div>
  {% else %}
      <input {{attr|xmlattr}}>
  {% endif %}

{% endmacro -%}

{% macro textarea(question, response) %}

  {% set attr = {
    "class": "input input--textarea",
    "name": response.id,
    "id": response.id,
    "placeholder": response.placeholder,
    "rows": "4",
    "cols": "60",
    "aria-describedby": "description-" ~ question.id ~ " guidance-" ~ response.id
  } %}

  <textarea {{attr|xmlattr}}>{{response.value|e}}</textarea>
{% endmacro %}


{%- macro select(name, values, default_value, response) %}
  <select class="input input--select" name="{{response.id}}-{{name}}" id="{{response.id}}-{{name}}">
    {% for value in values -%}
      <option value="{{loop.index}}" {{'selected' if loop.index == default_value}}>{{value}}</option>
    {%- endfor -%}
  </select>
{% endmacro -%}
