{% from "components/mutually-exclusive/_macro.njk" import onsMutuallyExclusive %}
{% from "components/input/_macro.njk" import onsInput %}

{%- set fields -%}
  <div class="field-group">
    {% if answer.label %}
      <p class="u-fs-r--b u-mb-xs">{{ answer.label }}</p>
    {% endif %}

    {% if form.fields[answer.id].years %}
      {% set input = form.fields[answer.id].years %}
        {{ onsInput({
          "id": input.id,
          "classes": "input--w-2" + (" js-exclusive-group" if mutuallyExclusive else ""),
          "name": input.name,
          "value": input.data if input.data is not none else '',
          "suffix": {
            "title": _(input.label.text),
            "text": format_unit_input_label('duration-year', unit_length='long') | capitalize
          }
        }) }}
    {% endif %}

    {% if form.fields[answer.id].months %}
      {% set input = form.fields[answer.id].months %}
        {{ onsInput({
          "id": input.id,
          "classes": "input--w-2" + (" js-exclusive-group" if mutuallyExclusive else ""),
          "name": input.name,
          "value": input.data if input.data is not none else '',
          "suffix": {
            "title": _(input.label.text),
            "text": format_unit_input_label('duration-month', unit_length='long') | capitalize
          }
        }) }}
    {% endif %}
  </div>
{%- endset -%}

{%- if mutuallyExclusive -%}
  {% set mutuallyExclusive = mutuallyExclusive | setAttributes({
    "legend": question_title,
    "legendClasses": "u-vh"
  }) -%}

  {%- call onsMutuallyExclusive(mutuallyExclusive) -%}
    {{- fields | safe -}}
  {%- endcall -%}
{%- else -%}
  {{- fields | safe -}}
{%- endif -%}