{
    "mime_type": "application/json/ons/eq",
    "schema_version": "0.0.1",
    "data_version": "0.0.3",
    "survey_id": "001",
    "title": "Test Routing Date Greater Than",
    "theme": "default",
    "description": "A test survey for routing based on a date greater than",
    "metadata": [{
        "name": "user_id",
        "validator": "string"
    }, {
        "name": "period_id",
        "validator": "string"
    }, {
        "name": "ru_name",
        "validator": "string"
    }, {
        "name": "return_by",
        "validator": "date"
    }],
    "sections": [{
        "id": "default-section",
        "groups": [{
            "blocks": [{
                "type": "Question",
                "id": "date-question",
                "question": {
                    "answers": [{
                        "id": "single-date-answer",
                        "mandatory": true,
                        "type": "MonthYearDate"
                    }],
                    "description": "",
                    "id": "date-questions",
                    "title": {
                        "text": "Enter a date greater than Return date: {date}",
                        "placeholders": [{
                            "placeholder": "date",
                            "transforms": [{
                                "transform": "format_date",
                                "arguments": {
                                    "date_to_format": {
                                        "source": "metadata",
                                        "identifier": "return_by"
                                    },
                                    "date_format": "d MMMM YYYY"
                                }
                            }]
                        }]
                    },
                    "type": "General"
                },
                "routing_rules": [{
                    "goto": {
                        "block": "correct-answer",
                        "when": [{
                            "id": "single-date-answer",
                            "condition": "greater than",
                            "date_comparison": {
                                "meta": "return_by"
                            }
                        }]
                    }
                }, {
                    "goto": {
                        "block": "incorrect-answer"
                    }
                }]
            }, {
                "type": "Interstitial",
                "id": "incorrect-answer",
                "title": "Incorrect Date",
                "content": [{
                    "description": {
                        "text": "You entered a return date earlier than {date}",
                        "placeholders": [{
                            "placeholder": "date",
                            "transforms": [{
                                "transform": "format_date",
                                "arguments": {
                                    "date_to_format": {
                                        "source": "metadata",
                                        "identifier": "return_by"
                                    },
                                    "date_format": "d MMMM YYYY"
                                }
                            }]
                        }]
                    }
                }],
                "routing_rules": [{
                    "goto": {
                        "block": "summary"
                    }
                }]
            }, {
                "type": "Interstitial",
                "id": "correct-answer",
                "title": "Correct Date",
                "content": [{
                    "description": {
                        "text": "You entered a return date later than {date}",
                        "placeholders": [{
                            "placeholder": "date",
                            "transforms": [{
                                "transform": "format_date",
                                "arguments": {
                                    "date_to_format": {
                                        "source": "metadata",
                                        "identifier": "return_by"
                                    },
                                    "date_format": "d MMMM YYYY"
                                }
                            }]
                        }]
                    }
                }]
            }, {
                "type": "Summary",
                "id": "summary"
            }],
            "id": "group",
            "title": ""
        }]
    }]
}
