{
    "mime_type": "application/json/ons/eq",
    "schema_version": "0.0.1",
    "data_version": "0.0.2",
    "survey_id": "023",
    "title": "Date formats",
    "description": "A test schema for single date period validation",
    "theme": "default",
    "legal_basis": "StatisticsOfTradeAct",
    "variables": {
        "period": "{{ format_conditional_date (answers.period_from, exercise.start_date)}} to {{ format_conditional_date (answers.period_to, exercise.end_date)}}"
    },
    "sections": [{
        "id": "default-section",
        "groups": [{
            "id": "dates",
            "title": "Date Range Validation",
            "blocks": [{
                    "type": "Question",
                    "id": "date-block",
                    "title": "Date",
                    "description": "Enter a date after 1 July 2017. Entering a date before will result in a 5xx on the next page as this will invalidate the schema",
                    "questions": [{
                        "id": "date-question",
                        "title": "Enter Date",
                        "type": "General",
                        "answers": [{
                            "id": "date",
                            "label": "Enter date",
                            "mandatory": true,
                            "type": "Date"
                        }]
                    }]
                },
                {
                    "type": "Question",
                    "id": "date-range-block",
                    "title": "Date Range",
                    "questions": [{
                        "id": "date-range-question",
                        "title": "Enter Date Range",
                        "type": "DateRange",
                        "description": "Enter any 'period from' 19 days before exercise start date and 1 July 2017. Then enter any 'period to', at least 1 month and 10 days after your previous answer on the last question",
                        "answers": [{
                                "id": "date-range-from",
                                "label": "Period from",
                                "mandatory": true,
                                "type": "Date",
                                "minimum": {
                                    "meta": "ref_p_start_date",
                                    "offset_by": {
                                      "days": -19
                                    }
                                },
                                "maximum": {
                                  "value": "2017-06-11",
                                  "offset_by": {
                                      "days": 20
                                    }
                                }
                            },
                            {
                                "id": "date-range-to",
                                "label": "Period to",
                                "mandatory": true,
                                "type": "Date",
                                "minimum": {
                                    "answer_id": "date",
                                    "offset_by": {
                                      "months": 1,
                                      "days": 10
                                    }
                                }
                            }
                        ]
                    }]
                },
                {
                    "type": "Summary",
                    "id": "summary"
                }
            ]
        }]
    }]
}
